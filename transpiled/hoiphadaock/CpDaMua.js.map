{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "application",
    "Standalone",
    "members",
    "createTable",
    "BACKGROUND_LO",
    "BACKGROUND_LAI",
    "BACKGROUND_TRAN",
    "BACKGROUND_TANG",
    "BACKGROUND_DUNG",
    "BACKGROUND_GIAM",
    "BACKGROUND_SAN",
    "BACKGROUND_NONE",
    "tableModel",
    "_tableModel",
    "ui",
    "table",
    "model",
    "Simple",
    "setColumns",
    "cpDaMua",
    "_read_file",
    "rowData",
    "request",
    "io",
    "Xhr",
    "setAccept",
    "setParser",
    "addListener",
    "e",
    "req",
    "getTarget",
    "response",
    "getResponse",
    "key",
    "filter_data",
    "filter",
    "x",
    "NoneSymbol",
    "cp",
    "giaDaMua",
    "nguoiMua",
    "stock_name",
    "giaHienTai",
    "percent_current",
    "color_percent_current",
    "giaHienTai_html",
    "percent_change",
    "parseFloat",
    "toFixed",
    "color",
    "percent_change_html",
    "console",
    "log",
    "push",
    "setData",
    "setValue",
    "send",
    "Table",
    "setMetaColumnCounts",
    "selectionMode",
    "selection",
    "Model",
    "MULTIPLE_INTERVAL_SELECTION",
    "getSelectionModel",
    "setSelectionMode",
    "getTableColumnModel",
    "setDataCellRenderer",
    "cellrenderer",
    "Html",
    "set",
    "width",
    "call_api",
    "file_name",
    "text",
    "JSON",
    "parse",
    "hoiphadaock",
    "CpDaMua"
  ],
  "sources": [
    "C:/Users/admin/PycharmProjects/hoiphadaock/source/class/hoiphadaock/CpDaMua.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   Copyright: 2022 undefined\r\n\r\n   License: MIT license\r\n\r\n   Authors: undefined\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * This is the main application class of \"hoiphadaock\"\r\n *\r\n * @asset(hoiphadaock/*)\r\n */\r\nqx.Class.define(\"hoiphadaock.CpDaMua\", {\r\n  extend: qx.application.Standalone,\r\n\r\n  members: {\r\n    createTable() {\r\n      var BACKGROUND_LO = \"#F33232\";\r\n      var BACKGROUND_LAI = \"#00E11A\";\r\n      var BACKGROUND_TRAN = \"#860D98\";\r\n      var BACKGROUND_TANG = \"#00E11A\";\r\n      var BACKGROUND_DUNG = \"#FEA50C\";\r\n      var BACKGROUND_GIAM = \"#F33232\";\r\n      var BACKGROUND_SAN = \"#0A8AE3\";\r\n      var BACKGROUND_NONE = \"#FFFFFF\";\r\n      // table model\r\n      var tableModel = (this._tableModel = new qx.ui.table.model.Simple());\r\n      tableModel.setColumns([\r\n        \"Mã CK\",\r\n        \"Name\",\r\n        \"Người mua\",\r\n        \"Giá mua\",\r\n        \"Lãi/Lỗ\",\r\n        \"Giá hiện tại\",\r\n        \"Giá min \\ntrong tuần\",\r\n        \"Giá max \\ntrong tuần\",\r\n        \"% Giá Max-Min\",\r\n        \"% Giá hiện tại\\nso với giá max\",\r\n        \"Min Time\",\r\n        \"Max Time\",\r\n        \"Giá trần\",\r\n        \"Giá sàn\",\r\n        \"Giá mở cửa\",\r\n        \"Có trong\\nInfina\",\r\n      ]);\r\n\r\n      var cpDaMua = this._read_file();\r\n      var rowData = [];\r\n      var request = new qx.io.request.Xhr(\r\n        \"https://s.cafef.vn/ajax/marketmap.ashx?stock=1&type=1&cate=\"\r\n      );\r\n      request.setAccept(\"application/json\");\r\n      request.setParser(\"json\");\r\n      request.addListener(\r\n        \"success\",\r\n        function (e) {\r\n          var req = e.getTarget();\r\n          var response = req.getResponse();\r\n          for (const key in cpDaMua) {\r\n            var filter_data = response.filter((x) => x.NoneSymbol === key)[0];\r\n            var cp = cpDaMua[key];\r\n            var giaDaMua = cp[\"bought\"];\r\n            var nguoiMua = cp[\"buyer\"];\r\n            var stock_name = filter_data[\"Name\"];\r\n            // Giá hiện tại\r\n            var giaHienTai = filter_data[\"Price\"] * 1000;\r\n            // Phần trăm thay đổi hiện tại\r\n            var percent_current = filter_data[\"Percent\"];\r\n            var color_percent_current = BACKGROUND_DUNG;\r\n            if (percent_current == 0) {\r\n              color_percent_current = BACKGROUND_DUNG;\r\n            } else if (percent_current > 0) {\r\n              color_percent_current = BACKGROUND_TANG;\r\n            } else if (percent_current < 0) {\r\n              color_percent_current = BACKGROUND_GIAM;\r\n            }\r\n            var giaHienTai_html =\r\n              \"<div style='background-color: \" +\r\n              color_percent_current +\r\n              \";'>\" +\r\n              giaHienTai +\r\n              \"(\" +\r\n              percent_current +\r\n              \"%)</div>\";\r\n\r\n            // Lãi/lỗ\r\n            var percent_change = parseFloat(\r\n              ((giaHienTai - giaDaMua) / giaDaMua) * 100\r\n            ).toFixed(2);\r\n            var color = BACKGROUND_LAI;\r\n            if (percent_change < 0) {\r\n              color = BACKGROUND_LO;\r\n            }\r\n            var percent_change_html =\r\n              \"<div style='background-color: \" +\r\n              color +\r\n              \";'>\" +\r\n              percent_change +\r\n              \"%</div>\";\r\n            console.log(filter_data);\r\n\r\n            rowData.push([\r\n              key,\r\n              stock_name,\r\n              nguoiMua,\r\n              giaDaMua,\r\n              percent_change_html,\r\n              giaHienTai_html,\r\n            ]);\r\n          }\r\n          tableModel.setData(rowData);\r\n          this._tableModel.setValue(1, 1, \"xxx\");\r\n        },\r\n        this\r\n      );\r\n      request.send();\r\n\r\n      // table\r\n      var table = new qx.ui.table.Table(tableModel);\r\n\r\n      table.setMetaColumnCounts([1, -1]);\r\n      var selectionMode =\r\n        qx.ui.table.selection.Model.MULTIPLE_INTERVAL_SELECTION;\r\n      table.getSelectionModel().setSelectionMode(selectionMode);\r\n      table\r\n        .getTableColumnModel()\r\n        .setDataCellRenderer(4, new qx.ui.table.cellrenderer.Html());\r\n      table\r\n        .getTableColumnModel()\r\n        .setDataCellRenderer(5, new qx.ui.table.cellrenderer.Html());\r\n\r\n      table.set({ width: 700 });\r\n      return table;\r\n    },\r\n    call_api() {\r\n      var request = new qx.io.request.Xhr(\r\n        \"https://s.cafef.vn/ajax/marketmap.ashx?stock=1&type=1&cate=\"\r\n      );\r\n      request.setAccept(\"application/json\");\r\n      request.setParser(\"json\");\r\n      request.addListener(\r\n        \"success\",\r\n        function (e) {\r\n          var req = e.getTarget();\r\n          var response = req.getResponse();\r\n        },\r\n        this\r\n      );\r\n      request.send();\r\n    },\r\n    _read_file() {\r\n      var file_name = \"data/da_mua.json\";\r\n      //   const text =\r\n      //     '{\"EIB\":{\"bought\":31400,\"buyer\":\"Tuyết-NTA\"},\"HBC\":{\"bought\":21100,\"buyer\":\"Mỹ Mỹ\"},\"OCB\":{\"bought\":20350,\"buyer\":\"Mỹ Đạt\"},\"VHC\":{\"bought\":102500,\"buyer\":\"Đạt-NT\"},\"BCM\":{\"bought\":72300,\"buyer\":\"Tuyết-NTA\"},\"LPB\":{\"bought\":13150,\"buyer\":\"Mỹ Mỹ\"},\"CTG\":{\"bought\":25250,\"buyer\":\"Đạt-NT\"},\"VSH\":{\"bought\":46100,\"buyer\":\"Đạt-NT\"},\"DPM\":{\"bought\":48900,\"buyer\":\"\"},\"VIB\":{\"bought\":20900,\"buyer\":\"Đạt-NT\"},\"VIP\":{\"bought\":6330,\"buyer\":\"Đạt-NT\"},\"AST\":{\"bought\":57900,\"buyer\":\"\"}}';\r\n      const text =\r\n        '{\"EIB\":{\"bought\":31400,\"buyer\":\"Tuyết-NTA\"},\"HBC\":{\"bought\":21100,\"buyer\":\"Mỹ Mỹ\"},\"OCB\":{\"bought\":20350,\"buyer\":\"Mỹ Đạt\"},\"VHC\":{\"bought\":102500,\"buyer\":\"Đạt-NT\"},\"BCM\":{\"bought\":72300,\"buyer\":\"Tuyết-NTA\"},\"LPB\":{\"bought\":13150,\"buyer\":\"Mỹ Mỹ\"},\"VSH\":{\"bought\":46100,\"buyer\":\"Đạt-NT\"},\"VIB\":{\"bought\":20900,\"buyer\":\"Đạt-NT\"},\"VIP\":{\"bought\":6330,\"buyer\":\"Đạt-NT\"}}';\r\n      return JSON.parse(text);\r\n    },\r\n  },\r\n});\r\n"
  ],
  "mappings": "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"
}